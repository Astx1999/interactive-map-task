{"ast":null,"code":"var _jsxFileName = \"/Users/astghik/WebstormProjects/interactive-map-task/src/components/GoogleMap/GoogleMap.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport { GoogleMap, Marker, useJsApiLoader, InfoWindow } from '@react-google-maps/api';\nimport { observer } from \"mobx-react-lite\";\nimport ConfirmModal from \"../ConfirmModal/ConfirmModal\";\nimport { RootStoreContext } from \"../../stores/RootStore\";\nimport handleApiPath from \"../../utils/handleApiPath\";\nimport styles from './GoogleMap.module.scss';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst containerStyle = {\n  width: '100%',\n  height: '100vh'\n};\nconst GoogleMapComponent = _s(observer(_c = _s(() => {\n  _s();\n  const {\n    listStore: {\n      addItem,\n      setActiveItem,\n      activeItem\n    }\n  } = useContext(RootStoreContext);\n  const [showPopup, setShowPopup] = useState(false);\n  const [popupPosition, setPopupPosition] = useState(null);\n  const [center, setCenter] = useState({\n    lat: 51.1657,\n    lng: 10.4515\n  });\n  const {\n    isLoaded\n  } = useJsApiLoader({\n    googleMapsApiKey: handleApiPath(\"REACT_APP_GOOGLE_API_KEY\")\n  });\n  useEffect(() => {\n    // calculating active item location and move map to center\n    if (activeItem) {\n      const distance = Math.sqrt(Math.pow(center.lat - activeItem.lat, 2) + Math.pow(center.lng - activeItem.lng, 2));\n      const threshold = 5;\n      if (distance > threshold) {\n        setCenter(activeItem);\n      }\n    }\n  }, [activeItem, center]);\n  const handleMapClick = event => {\n    setShowPopup(true);\n    setPopupPosition({\n      lat: event.latLng.lat(),\n      lng: event.latLng.lng()\n    });\n  };\n  const handleAddLocation = () => {\n    const newItem = {\n      lat: popupPosition.lat,\n      lng: popupPosition.lng\n    };\n    addItem(newItem);\n    setActiveItem(newItem);\n    handleClosePopup();\n  };\n  const handleClosePopup = () => {\n    setShowPopup(false);\n    setPopupPosition(null);\n  };\n  return isLoaded ? /*#__PURE__*/_jsxDEV(GoogleMap, {\n    mapContainerClassName: styles.map,\n    mapContainerStyle: containerStyle,\n    center: center,\n    zoom: 6,\n    onClick: handleMapClick,\n    children: [popupPosition && showPopup && /*#__PURE__*/_jsxDEV(InfoWindow, {\n      position: popupPosition,\n      onCloseClick: handleClosePopup,\n      children: /*#__PURE__*/_jsxDEV(ConfirmModal, {\n        isOpen: popupPosition && showPopup,\n        question: \"Do you want to add the location to the list?\",\n        handleAddLocation: handleAddLocation,\n        handleClosePopup: handleClosePopup,\n        confirmText: \"Add\",\n        rejectText: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }, this), activeItem && /*#__PURE__*/_jsxDEV(Marker, {\n      position: activeItem\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 28\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n}, \"k8aMP5q3lYm1wYZzh6rCgXIEXvA=\", false, function () {\n  return [useJsApiLoader];\n})), \"k8aMP5q3lYm1wYZzh6rCgXIEXvA=\", false, function () {\n  return [useJsApiLoader];\n});\n_c2 = GoogleMapComponent;\nexport default GoogleMapComponent;\nvar _c, _c2;\n$RefreshReg$(_c, \"GoogleMapComponent$observer\");\n$RefreshReg$(_c2, \"GoogleMapComponent\");","map":{"version":3,"names":["React","useContext","useEffect","useState","GoogleMap","Marker","useJsApiLoader","InfoWindow","observer","ConfirmModal","RootStoreContext","handleApiPath","styles","jsxDEV","_jsxDEV","Fragment","_Fragment","containerStyle","width","height","GoogleMapComponent","_s","_c","listStore","addItem","setActiveItem","activeItem","showPopup","setShowPopup","popupPosition","setPopupPosition","center","setCenter","lat","lng","isLoaded","googleMapsApiKey","distance","Math","sqrt","pow","threshold","handleMapClick","event","latLng","handleAddLocation","newItem","handleClosePopup","mapContainerClassName","map","mapContainerStyle","zoom","onClick","children","position","onCloseClick","isOpen","question","confirmText","rejectText","fileName","_jsxFileName","lineNumber","columnNumber","_c2","$RefreshReg$"],"sources":["/Users/astghik/WebstormProjects/interactive-map-task/src/components/GoogleMap/GoogleMap.js"],"sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\nimport {GoogleMap, Marker, useJsApiLoader, InfoWindow} from '@react-google-maps/api';\nimport {observer} from \"mobx-react-lite\";\nimport ConfirmModal from \"../ConfirmModal/ConfirmModal\";\nimport {RootStoreContext} from \"../../stores/RootStore\";\nimport handleApiPath from \"../../utils/handleApiPath\";\nimport styles from './GoogleMap.module.scss'\n\nconst containerStyle = {\n    width: '100%',\n    height: '100vh',\n};\n\nconst GoogleMapComponent = observer(() => {\n    const {listStore: {addItem, setActiveItem, activeItem}} = useContext(RootStoreContext);\n    const [showPopup, setShowPopup] = useState(false);\n    const [popupPosition, setPopupPosition] = useState(null);\n    const [center, setCenter] = useState({lat: 51.1657, lng: 10.4515});\n    const {isLoaded} = useJsApiLoader({googleMapsApiKey: handleApiPath(\"REACT_APP_GOOGLE_API_KEY\"),});\n\n    useEffect(() => {\n        // calculating active item location and move map to center\n        if (activeItem) {\n            const distance = Math.sqrt(\n                Math.pow(center.lat - activeItem.lat, 2) +\n                Math.pow(center.lng - activeItem.lng, 2)\n            );\n            const threshold = 5;\n\n            if (distance > threshold) {\n                setCenter(activeItem);\n            }\n        }\n    }, [activeItem, center]);\n\n    const handleMapClick = (event) => {\n        setShowPopup(true);\n        setPopupPosition({lat: event.latLng.lat(), lng: event.latLng.lng()});\n    };\n\n    const handleAddLocation = () => {\n        const newItem = {\n            lat: popupPosition.lat,\n            lng: popupPosition.lng\n        };\n\n        addItem(newItem);\n        setActiveItem(newItem);\n        handleClosePopup();\n    };\n\n    const handleClosePopup = () => {\n        setShowPopup(false);\n        setPopupPosition(null);\n    };\n\n    return isLoaded ? (\n        <GoogleMap\n            mapContainerClassName={styles.map}\n            mapContainerStyle={containerStyle}\n            center={center}\n            zoom={6}\n            onClick={handleMapClick}\n        >\n            {popupPosition && showPopup && (\n                <InfoWindow position={popupPosition} onCloseClick={handleClosePopup}>\n                    <ConfirmModal\n                        isOpen={popupPosition && showPopup}\n                        question=\"Do you want to add the location to the list?\"\n                        handleAddLocation={handleAddLocation}\n                        handleClosePopup={handleClosePopup}\n                        confirmText={\"Add\"}\n                        rejectText={\"Cancel\"}\n                    />\n                </InfoWindow>\n            )}\n            {activeItem && <Marker position={activeItem}/>}\n        </GoogleMap>\n    ) : <></>;\n});\n\nexport default GoogleMapComponent;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}