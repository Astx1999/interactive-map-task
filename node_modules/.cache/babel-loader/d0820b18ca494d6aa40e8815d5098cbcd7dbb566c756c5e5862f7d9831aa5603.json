{"ast":null,"code":"var _jsxFileName = \"/Users/astghik/WebstormProjects/interactive-map-task/src/components/GoogleMap/GoogleMap.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport { GoogleMap, Marker, useJsApiLoader, InfoWindow } from '@react-google-maps/api';\nimport handleApiPath from \"../../utils/handleApiPath\";\nimport { observer } from \"mobx-react-lite\";\nimport { RootStoreContext } from \"../../stores/RootStore\";\nimport ConfirmModal from \"../ConfirmModal/ConfirmModal\";\nimport styles from './GoogleMap.module.scss';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst containerStyle = {\n  width: '100%',\n  height: '100vh'\n};\nconst GoogleMapComponent = _s(observer(_c = _s(() => {\n  _s();\n  const {\n    listStore: {\n      addItem,\n      setActiveItem,\n      activeItem\n    }\n  } = useContext(RootStoreContext);\n  const {\n    isLoaded\n  } = useJsApiLoader({\n    googleMapsApiKey: handleApiPath(\"REACT_APP_GOOGLE_API_KEY\")\n  });\n  const [showPopup, setShowPopup] = useState(false);\n  const [popupPosition, setPopupPosition] = useState(null);\n  const [center, setCenter] = useState({\n    lat: 51.1657,\n    lng: 10.4515\n  });\n  useEffect(() => {\n    if (activeItem) {\n      // Calculate the distance between the current center and the active item\n      const distance = Math.sqrt(Math.pow(center.lat - activeItem.lat, 2) + Math.pow(center.lng - activeItem.lng, 2));\n\n      // Define a threshold distance (in degrees) for center update\n      const threshold = 5; // Increase the threshold value for a bigger range\n\n      // Only update the center if the active item is outside the threshold range\n      if (distance > threshold) {\n        setCenter(activeItem);\n      }\n    }\n  }, [activeItem, center]);\n  const handleMapClick = event => {\n    setShowPopup(true);\n    setPopupPosition({\n      lat: event.latLng.lat(),\n      lng: event.latLng.lng()\n    });\n  };\n  const handleAddLocation = () => {\n    const newItem = {\n      lat: popupPosition.lat,\n      lng: popupPosition.lng\n    };\n    addItem(newItem);\n    setActiveItem(newItem);\n    handleClosePopup();\n  };\n  const handleClosePopup = () => {\n    setShowPopup(false);\n    setPopupPosition(null);\n  };\n  return isLoaded ? /*#__PURE__*/_jsxDEV(GoogleMap, {\n    mapContainerClassName: styles.map,\n    mapContainerStyle: containerStyle,\n    center: center,\n    zoom: 6,\n    onClick: handleMapClick,\n    children: [popupPosition && showPopup && /*#__PURE__*/_jsxDEV(InfoWindow, {\n      position: {\n        lat: popupPosition.lat,\n        lng: popupPosition.lng\n      },\n      onCloseClick: handleClosePopup,\n      children: /*#__PURE__*/_jsxDEV(ConfirmModal, {\n        question: \"Do you want to add the location to the list?\",\n        handleAddLocation: handleAddLocation,\n        handleClosePopup: handleClosePopup\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }, this), activeItem && /*#__PURE__*/_jsxDEV(Marker, {\n      position: activeItem\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 28\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n}, \"EIhKuYOKnG6f4W/8XZrrmu69AZY=\", false, function () {\n  return [useJsApiLoader];\n})), \"EIhKuYOKnG6f4W/8XZrrmu69AZY=\", false, function () {\n  return [useJsApiLoader];\n});\n_c2 = GoogleMapComponent;\nexport default GoogleMapComponent;\nvar _c, _c2;\n$RefreshReg$(_c, \"GoogleMapComponent$observer\");\n$RefreshReg$(_c2, \"GoogleMapComponent\");","map":{"version":3,"names":["React","useContext","useEffect","useState","GoogleMap","Marker","useJsApiLoader","InfoWindow","handleApiPath","observer","RootStoreContext","ConfirmModal","styles","jsxDEV","_jsxDEV","Fragment","_Fragment","containerStyle","width","height","GoogleMapComponent","_s","_c","listStore","addItem","setActiveItem","activeItem","isLoaded","googleMapsApiKey","showPopup","setShowPopup","popupPosition","setPopupPosition","center","setCenter","lat","lng","distance","Math","sqrt","pow","threshold","handleMapClick","event","latLng","handleAddLocation","newItem","handleClosePopup","mapContainerClassName","map","mapContainerStyle","zoom","onClick","children","position","onCloseClick","question","fileName","_jsxFileName","lineNumber","columnNumber","_c2","$RefreshReg$"],"sources":["/Users/astghik/WebstormProjects/interactive-map-task/src/components/GoogleMap/GoogleMap.js"],"sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\nimport {GoogleMap, Marker, useJsApiLoader, InfoWindow} from '@react-google-maps/api';\nimport handleApiPath from \"../../utils/handleApiPath\";\nimport {observer} from \"mobx-react-lite\";\nimport {RootStoreContext} from \"../../stores/RootStore\";\nimport ConfirmModal from \"../ConfirmModal/ConfirmModal\";\nimport styles from './GoogleMap.module.scss'\n\n\nconst containerStyle = {\n    width: '100%',\n    height: '100vh',\n};\n\nconst GoogleMapComponent = observer(() => {\n    const {\n        listStore: {\n            addItem,\n            setActiveItem,\n            activeItem\n        }\n    } = useContext(RootStoreContext)\n\n    const {isLoaded} = useJsApiLoader({\n        googleMapsApiKey: handleApiPath(\"REACT_APP_GOOGLE_API_KEY\"),\n    });\n\n    const [showPopup, setShowPopup] = useState(false);\n    const [popupPosition, setPopupPosition] = useState(null);\n    const [center, setCenter] = useState({\n        lat: 51.1657,\n        lng: 10.4515,\n    });\n\n    useEffect(() => {\n        if (activeItem) {\n            // Calculate the distance between the current center and the active item\n            const distance = Math.sqrt(\n                Math.pow(center.lat - activeItem.lat, 2) +\n                Math.pow(center.lng - activeItem.lng, 2)\n            );\n\n            // Define a threshold distance (in degrees) for center update\n            const threshold = 5; // Increase the threshold value for a bigger range\n\n            // Only update the center if the active item is outside the threshold range\n            if (distance > threshold) {\n                setCenter(activeItem);\n            }\n        }\n\n    }, [activeItem, center]);\n\n\n    const handleMapClick = (event) => {\n        setShowPopup(true);\n        setPopupPosition({lat: event.latLng.lat(), lng: event.latLng.lng()});\n    };\n\n    const handleAddLocation = () => {\n        const newItem = {\n            lat: popupPosition.lat,\n            lng: popupPosition.lng\n        };\n\n        addItem(newItem);\n        setActiveItem(newItem);\n        handleClosePopup()\n    };\n\n    const handleClosePopup = () => {\n        setShowPopup(false);\n        setPopupPosition(null)\n    }\n\n    return isLoaded ? (\n        <GoogleMap\n            mapContainerClassName={styles.map}\n            mapContainerStyle={containerStyle}\n            center={center}\n            zoom={6}\n            onClick={handleMapClick}\n\n        >\n            {popupPosition && showPopup && (\n                <InfoWindow\n                    position={{lat: popupPosition.lat, lng: popupPosition.lng}}\n                    onCloseClick={handleClosePopup}\n                >\n                    <ConfirmModal\n                        question=\"Do you want to add the location to the list?\"\n                        handleAddLocation={handleAddLocation}\n                        handleClosePopup={handleClosePopup}\n                    />\n                </InfoWindow>\n            )}\n            {activeItem && <Marker position={activeItem}/>}\n        </GoogleMap>\n    ) : <></>;\n});\n\nexport default GoogleMapComponent;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}